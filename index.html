<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albion Market Flipper</title>
    <script>
        async function fetchMarketData() {
            const itemId = "T4_BAG"; // Exemplu, schimbÄƒ cu ce vrei
            const locations = ["Bridgewatch", "Martlock", "Lymhurst", "Thetford", "Fort Sterling"];
            
            const url = `https://west.albion-online-data.com/api/v2/stats/prices/${itemId}.json`;
            const response = await fetch(url);
            const data = await response.json();
            
            const marketData = locations.map(city => {
                const sellOrder = data.find(d => d.city === city && d.sell_price_min > 0);
                const buyOrder = data.find(d => d.city === city && d.buy_price_max > 0);
                
                return {
                    city,
                    sellPrice: sellOrder ? sellOrder.sell_price_min : "N/A",
                    buyPrice: buyOrder ? buyOrder.buy_price_max : "N/A",
                    profit: sellOrder && buyOrder ? (sellOrder.sell_price_min * 0.975 - buyOrder.buy_price_max).toFixed(2) : "N/A"
                };
            });
            
            displayData(marketData);
        }
        
        function displayData(data) {
            const table = document.getElementById("marketTable");
            table.innerHTML = "<tr><th>City</th><th>Buy Price</th><th>Sell Price</th><th>Profit</th></tr>";
            data.forEach(row => {
                table.innerHTML += `<tr><td>${row.city}</td><td>${row.buyPrice}</td><td>${row.sellPrice}</td><td>${row.profit}</td></tr>`;
            });
        }
        
        window.onload = fetchMarketData;
    </script>
</head>
<body>
    <h1>Albion Market Flipper</h1>
    <table border="1" id="marketTable"></table>
</body>
</html>
